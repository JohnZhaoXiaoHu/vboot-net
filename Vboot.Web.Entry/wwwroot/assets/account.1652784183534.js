var B=Object.defineProperty;var k=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var I=(e,o,n)=>o in e?B(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,F=(e,o)=>{for(var n in o||(o={}))v.call(o,n)&&I(e,n,o[n]);if(k)for(var n of k(o))R.call(o,n)&&I(e,n,o[n]);return e};import{a as V,s as $,aB as P,aF as T,a3 as U,B as A,ag as q,R as x,S as t,a2 as i,o as L,Z as s,e as S,M as D,Y as E,X as j}from"./vue.1652784183534.js";import{_ as z,A as G,B as H,u as M,C as Y,s as K,S as b,D as C,F as O,G as Q,E as W,N as X}from"./index.1652784183534.js";const J=V({name:"loginAccount",setup(){const{t:e}=G(),o=H(),n=M(),{themeConfig:y}=$(n),f=P(),h=T(),r=U({isShowPassword:!1,ruleForm:{userName:"sa",password:"1",code:"1234"},loading:{signIn:!1}}),_=A(()=>Y(new Date)),g=async()=>{const p=await K({url:"/login",method:"post",data:{username:r.ruleForm.userName,password:r.ruleForm.password}});r.loading.signIn=!0;let u=[],a=[],c=["admin"],m=["btn.add","btn.del","btn.edit","btn.link"],l=["common"],N=["btn.add","btn.link"];r.ruleForm.userName==="admin"?(u=c,a=m):(u=l,a=N),u=c,a=m;const w={userid:p.zuser.id,userName:r.ruleForm.userName,photo:r.ruleForm.userName==="admin"?"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1813762643,1914315241&fm=26&gp=0.jpg":"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=317673774,2961727727&fm=26&gp=0.jpg",time:new Date().getTime(),roles:u,authBtnList:a};b.set("token",Math.random().toString(36).substr(0)),b.set("userInfo",w),C.set("userid",w.userid),C.set("token","Bearer "+p.token),o.setUserInfos(F({},w)),y.value.isRequestRoutes?(await Q(),d()):(await O(),d())},d=()=>{var a,c,m,l;let p=_.value;(a=f.query)!=null&&a.redirect?h.push({path:(c=f.query)==null?void 0:c.redirect,query:Object.keys((m=f.query)==null?void 0:m.params).length>0?JSON.parse((l=f.query)==null?void 0:l.params):""}):h.push("/"),r.loading.signIn=!0;const u=e("message.signInText");W.success(`${p}\uFF0C${u}`),X.start()};return F({onSignIn:g},q(r))}}),Z=j("1234");function ee(e,o,n,y,f,h){const r=i("ele-User"),_=i("el-icon"),g=i("el-input"),d=i("el-form-item"),p=i("ele-Unlock"),u=i("ele-Position"),a=i("el-col"),c=i("el-button"),m=i("el-form");return L(),x(m,{size:"large",class:"login-content-form"},{default:t(()=>[s(d,{class:"login-animation1"},{default:t(()=>[s(g,{type:"text",placeholder:e.$t("message.account.accountPlaceholder1"),modelValue:e.ruleForm.userName,"onUpdate:modelValue":o[0]||(o[0]=l=>e.ruleForm.userName=l),clearable:"",autocomplete:"off"},{prefix:t(()=>[s(_,{class:"el-input__icon"},{default:t(()=>[s(r)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),s(d,{class:"login-animation2"},{default:t(()=>[s(g,{type:e.isShowPassword?"text":"password",placeholder:e.$t("message.account.accountPlaceholder2"),modelValue:e.ruleForm.password,"onUpdate:modelValue":o[2]||(o[2]=l=>e.ruleForm.password=l),autocomplete:"off"},{prefix:t(()=>[s(_,{class:"el-input__icon"},{default:t(()=>[s(p)]),_:1})]),suffix:t(()=>[S("i",{class:D(["iconfont el-input__icon login-content-password",e.isShowPassword?"icon-yincangmima":"icon-xianshimima"]),onClick:o[1]||(o[1]=l=>e.isShowPassword=!e.isShowPassword)},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),s(d,{class:"login-animation3"},{default:t(()=>[s(a,{span:15},{default:t(()=>[s(g,{type:"text",maxlength:"4",placeholder:e.$t("message.account.accountPlaceholder3"),modelValue:e.ruleForm.code,"onUpdate:modelValue":o[3]||(o[3]=l=>e.ruleForm.code=l),clearable:"",autocomplete:"off"},{prefix:t(()=>[s(_,{class:"el-input__icon"},{default:t(()=>[s(u)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),s(a,{span:1}),s(a,{span:8},{default:t(()=>[s(c,{class:"login-content-code"},{default:t(()=>[Z]),_:1})]),_:1})]),_:1}),s(d,{class:"login-animation4"},{default:t(()=>[s(c,{type:"primary",class:"login-content-submit",round:"",onClick:e.onSignIn,loading:e.loading.signIn},{default:t(()=>[S("span",null,E(e.$t("message.account.accountBtnText")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})}var ne=z(J,[["render",ee],["__scopeId","data-v-622dc15a"]]);export{ne as default};
