var J=Object.defineProperty,K=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var E=(p,n,d)=>n in p?J(p,n,{enumerable:!0,configurable:!0,writable:!0,value:d}):p[n]=d,k=(p,n)=>{for(var d in n||(n={}))X.call(n,d)&&E(p,d,n[d]);if(D)for(var d of D(n))Y.call(n,d)&&E(p,d,n[d]);return p},B=(p,n)=>K(p,P(n));import{a as Z,aB as $,j as A,a3 as G,ag as L,m as Q,B as W,a2 as _,o as ee,R as te,S as t,Z as e,u as a,e as r,J as le,T as oe,U as ae,Y as F,X as g,l as se,ap as ne}from"./vue.1652784183534.js";import{e as ue,a as de,t as re}from"./edit.16527841835342.js";import{O as ie}from"./OrgModal.1652784183534.js";import{s as _e}from"./index.1652784183534.js";import"./DeptTree.1652784183534.js";const pe=r("div",{style:{"line-height":"32px"}},"\u89D2\u8272\u4FE1\u606F",-1),me=g("\u4FDD \u5B58"),ce=g("\u5173 \u95ED"),fe={style:{"margin-top":"8px","margin-bottom":"8px"}},ve={class:"zinput"},Fe={class:"zinput",style:{height:"auto"}},ge={class:"zinput"},he={class:"zinput"},be={class:"zinput",style:{height:"auto"}},ye={class:"zinput"},Ae={class:"zinput"},xe={class:"zinput"},Ve={class:"zinput"},we={style:{"margin-bottom":"10px"}},Ce=g("\u5C55 \u5F00"),De=g("\u6298 \u53E0"),Ee={style:{border:"1px solid #eee"}},ke={name:"sysPermRole"},Oe=Z(B(k({},ke),{setup(p){const n=$(),{proxy:d}=se(),x=A("tab1"),h=G({url:"/sys/perm/role",params:{path:"",query:""},form:{avtag:!0},treeData:[]}),{form:l,treeData:V}=L(h);Q(async()=>{await ue(h,n),await O()});const z=()=>{for(let s=0;s<c.value.store._getAllNodes().length;s++)c.value.store._getAllNodes()[s].expanded=!0},N=()=>{for(let s=0;s<c.value.store._getAllNodes().length;s++)c.value.store._getAllNodes()[s].expanded=!1},c=A(),M=async()=>{const s=c.value.getCheckedNodes(),o=[];for(const u of s)o.push({id:u.id,name:u.name});l.value.menus=o,await re(h,d,n)},w=A(),R=()=>{w.value.openModal({orgType:10,selectMode:2,orgs:ne(l.value.orgs)})},U=s=>{l.value.orgs=s.orgs},b=W(()=>{let s="";if(l.value.orgs&&l.value.orgs.length>0)for(const o of l.value.orgs)s+=o.name+"\uFF1B";return s});async function O(){V.value=await _e({url:"/sys/perm/menu/tree",method:"get"});const s=[];for(const o of l.value.menus)s.push(o.id);c.value.setCheckedKeys(s)}return(s,o)=>{const u=_("el-col"),v=_("el-button"),f=_("el-row"),y=_("el-input"),m=_("el-form-item"),S=_("el-input-number"),I=_("el-switch"),C=_("el-tab-pane"),T=_("el-tree"),q=_("el-tabs"),j=_("el-form"),H=_("el-card");return ee(),te(H,{class:"box-card","body-style":{padding:"2px 8px"},shadow:"never"},{header:t(()=>[e(f,null,{default:t(()=>[e(u,{span:10},{default:t(()=>[pe]),_:1}),e(u,{span:14,style:{"text-align":"right"}},{default:t(()=>[e(v,{type:"success",onClick:M,plain:""},{default:t(()=>[me]),_:1}),e(v,{type:"info",onClick:o[0]||(o[0]=i=>a(de)(a(d),a(n))),plain:""},{default:t(()=>[ce]),_:1})]),_:1})]),_:1})]),default:t(()=>[r("div",fe,[e(j,{class:"zform",model:a(l),"label-width":"140px"},{default:t(()=>[e(q,{type:"card",modelValue:x.value,"onUpdate:modelValue":o[6]||(o[6]=i=>x.value=i)},{default:t(()=>[e(C,{label:"\u57FA\u672C\u4FE1\u606F",name:"tab1"},{default:t(()=>[e(f,{style:{"border-top":"1px solid #d2d2d2"}},{default:t(()=>[e(u,{span:24},{default:t(()=>[e(m,{label:"\u89D2\u8272\u540D\u79F0\uFF1A",prop:"name",rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:t(()=>[r("div",ve,[e(y,{modelValue:a(l).name,"onUpdate:modelValue":o[1]||(o[1]=i=>a(l).name=i)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(u,{span:24},{default:t(()=>[e(m,{label:"\u6307\u6D3E\u7528\u6237\uFF1A"},{default:t(()=>[r("div",Fe,[e(y,{type:"textarea",rows:4,modelValue:a(b),"onUpdate:modelValue":o[2]||(o[2]=i=>le(b)?b.value=i:null),readonly:"",onClick:R},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(u,{span:12},{default:t(()=>[e(m,{label:"\u6392\u5E8F\u53F7\uFF1A"},{default:t(()=>[r("div",ge,[e(S,{modelValue:a(l).ornum,"onUpdate:modelValue":o[3]||(o[3]=i=>a(l).ornum=i),"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(m,{label:"\u662F\u5426\u53EF\u7528\uFF1A"},{default:t(()=>[r("div",he,[e(I,{modelValue:a(l).avtag,"onUpdate:modelValue":o[4]||(o[4]=i=>a(l).avtag=i)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(u,{span:24},{default:t(()=>[e(m,{label:"\u5907\u6CE8\uFF1A"},{default:t(()=>[r("div",be,[e(y,{style:{"font-family":"'Courier New', Helvetica, Arial, sans-serif","font-size":"16px"},type:"textarea",rows:4,modelValue:a(l).notes,"onUpdate:modelValue":o[5]||(o[5]=i=>a(l).notes=i)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),oe(e(f,null,{default:t(()=>[e(u,{span:6},{default:t(()=>[e(m,{label:"\u521B\u5EFA\u4EBA\uFF1A"},{default:t(()=>[r("div",ye,F(a(l).crman?a(l).crman.name:""),1)]),_:1})]),_:1}),e(u,{span:6},{default:t(()=>[e(m,{label:"\u521B\u5EFA\u65F6\u95F4\uFF1A"},{default:t(()=>[r("div",Ae,F(a(l).crtim),1)]),_:1})]),_:1}),e(u,{span:6},{default:t(()=>[e(m,{label:"\u66F4\u65B0\u4EBA\uFF1A"},{default:t(()=>[r("div",xe,F(a(l).upman?a(l).upman.name:""),1)]),_:1})]),_:1}),e(u,{span:6},{default:t(()=>[e(m,{label:"\u66F4\u65B0\u65F6\u95F4\uFF1A"},{default:t(()=>[r("div",Ve,F(a(l).uptim),1)]),_:1})]),_:1})]),_:1},512),[[ae,a(l).crtim]])]),_:1}),e(C,{label:"\u83DC\u5355\u5206\u914D",name:"tab3"},{default:t(()=>[r("div",we,[e(v,{onClick:z,plain:""},{default:t(()=>[Ce]),_:1}),e(v,{onClick:N,plain:""},{default:t(()=>[De]),_:1})]),r("div",Ee,[e(T,{ref_key:"treeRef",ref:c,data:a(V),"show-checkbox":"","node-key":"id",props:{children:"children",label:"name"}},null,8,["data"])])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])]),e(ie,{ref_key:"orgModal",ref:w,onClose:U},null,512)]),_:1})}}}));export{Oe as default};
